{% extends "base.html" %}
{% load static %}

{% block content %}
<section>
    <h1>Submitted Videos</h1>
    {% if vids_list %}
            {% for vid in vids_list %}
                <li>
                    <img src={{ vid.thumb_url }}>
                    <span>{{ vid.title }}</span>
                    <a href="#" class="vid-vote-btn" data-vote-type="up" data-for-vid={{ vid.id }}>⬆</a>
                    <span>{{ vid.points }}</span>
                    <a href="#" class="vid-vote-btn" data-vote-type="down" data-for-vid={{ vid.id }}>⬇</a>
                </li>
            {% endfor %}
    {% else %}
        <p>No videos in queue. Go ahead, submit one!</p>
    {% endif %}
</section>

<section>
    <h1>Submit Video</h1>
    <p>
    Enter the video id (the part after <tt>watch?v=</tt> in the video's url) of a YouTube video to submit it.
    </p>
    <form method="post">
        {% csrf_token %}
        {{ vid_form.as_p }}
        <button type="submit">Submit</button>
    </form>
</section>



{% endblock content %}


{% block scripts %}
    {{ block.super }}

    <script>

        const ajaxUrl = {% url 'videos:vote' %}
        const CSRF_TOKEN = '{{ csrf_token }}'

    </script>

    <script src="{% static 'videos/vote.js' %}"></script>

{% endblock scripts %}

